PACKAGE_NEEDS_CONFIGURE = YES

include $(GNUSTEP_MAKEFILES)/common.make

include ../gworkspace.make

PACKAGE_NAME = @PACKAGE_NAME@
VERSION = @PACKAGE_VERSION@

GNUSTEP_INSTALLATION_DIR = $(GNUSTEP_SYSTEM_ROOT)

ifeq ($(FOUNDATION_LIB), apple)
  GNUSTEP_INSTALLATION_DIR = /
endif

#
# MAIN APP
#
APP_NAME = GWorkspace
GWorkspace_PRINCIPAL_CLASS = GWorkspace
GWorkspace_APPLICATION_ICON=FileManager.tiff

GWorkspace_HAS_RESOURCE_BUNDLE = yes

#
# Additional libraries
#
ifeq ($(FOUNDATION_LIB), apple)
  ADDITIONAL_GUI_LIBS += -framework GWorkspace
else
  ADDITIONAL_GUI_LIBS += -lGWorkspace
endif

GWorkspace_RESOURCE_FILES = \
  Resources/Icons/* \
  Resources/English.lproj \
  Resources/French.lproj \
  Resources/German.lproj \
  Resources/Italian.lproj \
  Resources/Romanian.lproj \
  Resources/Spanish.lproj \
  Resources/Portuguese.lproj \
  Resources/Dutch.lproj \
  ../Viewers/BrowserViewer/BrowserViewer.viewer \
  ../Viewers/IconsViewer/IconsViewer.viewer \
  ../Viewers/SmallIconsViewer/SmallIconsViewer.viewer \

GWorkspace_LANGUAGES = Resources/English \
			                Resources/French \
			                Resources/German \
			                Resources/Italian \
			                Resources/Romanian \
			                Resources/Spanish \
			                Resources/Portuguese \
                      Resources/Dutch

ifeq ($(FOUNDATION_LIB), apple)
  GWorkspace_LOCALIZED_RESOURCE_FILES = MainMenu.nib \
			                		              Localizable.strings \
			                		              Finder.nib \
                                        PrefWindow.nib \
                                        DefEditorPref.nib \
                                        XTermPref.nib \
                                        DefSortOrderPref.nib \
                                        ShelfPref.nib \
                                        DeskTopPref.nib \
                                        IconsPref.nib \
                                        HiddenFilesPref.nib \
                                        OpenWith.nib \
                                        RunExternal.nib \
                                        StartAppWin.nib 
else 
  GWorkspace_LOCALIZED_RESOURCE_FILES = Localizable.strings \
			                		              Finder.gorm \
                                        PrefWindow.gorm \
                                        DefEditorPref.gorm \
                                        XTermPref.gorm \
                                        DefSortOrderPref.gorm \
                                        ShelfPref.gorm \
                                        DeskTopPref.gorm \
                                        IconsPref.gorm \
                                        HiddenFilesPref.gorm \
                                        OpenWith.gorm \
                                        RunExternal.gorm \
                                        StartAppWin.gorm 
endif

# The Objective-C source files to be compiled

ifneq ($(FOUNDATION_LIB), apple)
  GWorkspace_OBJC_FILES = main.m \
  GWorkspace.m \
  IconViewsIcon.m \
  GWSplitView.m \
  ViewersWindow.m \
  Shelf/Shelf.m \
  Shelf/ShelfIcon.m \
  TShelf/TShelfWin.m \
  TShelf/TShelfView.m \
  TShelf/TShelfViewItem.m \
  TShelf/TShelfIconsView.m \
  TShelf/TShelfIcon.m \
  TShelf/TShelfPBIcon.m \
  Apps/Apps.m \
  Finder/FinderShelf.m \
  Finder/FinderShelfIcon.m \
  Finder/FinderController.m \
  Desktop/DesktopWindow.m \
  Desktop/DesktopView.m \
  Desktop/DesktopViewIcon.m \
  Recycler/Recycler.m \
  Recycler/RecyclerViews.m \
  Recycler/RecyclerIcon.m \
  Preferences/PrefController.m \
  Preferences/DefEditorPref.m \
  Preferences/XTermPref.m \
  Preferences/DefSortOrderPref.m \
  Preferences/ShelfPref.m \
  Preferences/DeskTopPref.m \
  Preferences/IconsPref.m \
  Preferences/HiddenFilesPref.m \
  History/History.m \
  Dialogs/Dialogs.m \
  Dialogs/OpenWithController.m \
  Dialogs/RunExternalController.m \
  Dialogs/CompletionField.m \
  Dialogs/StartAppWin.m \
  Fiend/Fiend.m \
  Fiend/FiendLeaf.m 
else
  GWorkspace_OBJC_FILES = main.m \
  GWorkspace.m \
  IconViewsIcon.m \
  GWSplitView.m \
  ViewersWindow.m \
  Shelf/Shelf.m \
  Shelf/ShelfIcon.m \
  TShelf/TShelfWin.m \
  TShelf/TShelfView.m \
  TShelf/TShelfViewItem.m \
  TShelf/TShelfIconsView.m \
  TShelf/TShelfIcon.m \
  TShelf/TShelfPBIcon.m \
  Apps/Apps.m \
  Finder/FinderShelf.m \
  Finder/FinderShelfIcon.m \
  Finder/FinderController.m \
  Desktop/DesktopWindow.m \
  Desktop/DesktopView.m \
  Desktop/DesktopViewIcon.m \
  Recycler/Recycler.m \
  Recycler/RecyclerViews.m \
  Recycler/RecyclerIcon.m \
  Preferences/PrefController.m \
  Preferences/DefEditorPref.m \
  Preferences/XTermPref.m \
  Preferences/DefSortOrderPref.m \
  Preferences/ShelfPref.m \
  Preferences/DeskTopPref.m \
  Preferences/IconsPref.m \
  Preferences/HiddenFilesPref.m \
  History/History.m \
  Dialogs/Dialogs.m \
  Dialogs/OpenWithController.m \
  Dialogs/RunExternalController.m \
  Dialogs/CompletionField.m \
  Dialogs/StartAppWin.m \
  Fiend/Fiend.m \
  Fiend/FiendLeaf.m 
endif
						 
-include GNUmakefile.preamble

-include GNUmakefile.local

include $(GNUSTEP_MAKEFILES)/aggregate.make

include $(GNUSTEP_MAKEFILES)/application.make

-include GNUmakefile.postamble
